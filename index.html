<!DOCTYPE html> 
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BYT BOT â€” Control Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0b0b;--panel:#131313;--panel-2:#1a1a1a;--accent:#00ff99;--accent-2:#22d3ee;--muted:#8b8b8b;}
    html,body{height:100%}
    body{font-family: "JetBrains Mono", monospace;background:radial-gradient(1200px 600px at 10% -10%, rgba(0,255,153,.07), transparent),radial-gradient(900px 500px at 110% 0%, rgba(34,211,238,.06), transparent),var(--bg);color:#e0e0e0}
    .neon{ text-shadow: 0 0 8px var(--accent), 0 0 16px rgba(0,255,153,.35)}
    .glow{ box-shadow: 0 0 0 1px rgba(0,255,153,.25), 0 0 30px rgba(0,255,153,.12) inset }
    .card{ background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.2)); border:1px solid rgba(255,255,255,.1); border-radius:1rem }
    .btn{ background:#111;border:1px solid #2a2a2a;border-radius:.75rem;padding:.7rem 1rem }
    .btn:hover{ background:#171717 }
    .tab{ display:none }
    .tab.active{ display:block }
    mark{ background: rgba(34,197,94,.25); padding: 0 .25rem; border-radius:.3rem }
  </style>
</head>
<body class="min-h-screen">
  <header class="sticky top-0 z-40 backdrop-blur bg-black/40 border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-3 h-3 rounded-full" style="background:var(--accent);"></div>
        <h1 class="text-xl md:text-2xl font-bold glitch neon" data-text="BYT BOT HUB">BYT BOT HUB</h1>
      </div>
      <nav class="flex flex-wrap gap-2">
        <button class="btn tablink" data-tab="home">Home</button>
        <button class="btn tablink" data-tab="slots">Slots</button>
        <button class="btn tablink" data-tab="roulette">Roulette</button>
        <button class="btn tablink" data-tab="commands">Commands</button>
        <button class="btn tablink" data-tab="info">Bot Infos</button>
        <button class="btn tablink" data-tab="support">Support</button>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8 space-y-8">
    <!-- ===== HOME / IMG MAKER ===== -->
    <section id="home" class="tab active">
      <div class="card p-6 md:p-8">
        <h2 class="text-2xl font-bold mb-1">BYT IMG MAKER</h2>
        <p class="text-sm text-green-400">MADE BY BYT // POWERED BY GEMINI</p>
        <div class="grid md:grid-cols-[1.1fr_.9fr] gap-6 mt-6">
          <div class="space-y-3">
            <textarea id="promptInput" class="w-full h-40 p-4 bg-black/70 border border-green-600 rounded-lg text-green-200 placeholder-green-600 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="> Gib deine Beschreibung ein..."></textarea>
            <div class="flex gap-3">
              <button id="generateButton" class="btn border-green-700 hover:border-green-600">&gt; Bild generieren</button>
              <button id="clearPrompt" class="btn">Clear</button>
            </div>
            <div id="loadingIndicator" class="hidden text-green-400 font-medium">[*] Dein Bild wird generiert...</div>
          </div>
          <div id="imageContainer" class="hud p-4 flex items-center justify-center min-h-[256px] rounded-xl">
            <p class="text-green-600">&gt; BYT SYSTEM READY</p>
          </div>
        </div>
        <p class="text-xs text-muted mt-3"></p>
      </div>
    </section>

    <!-- andere Tabs unverÃ¤ndert -->
    <section id="slots" class="tab"><div class="card p-6">ðŸŽ° Slots kommen hier â€¦</div></section>
    <section id="roulette" class="tab"><div class="card p-6">ðŸŽ¡ Roulette kommt hier â€¦</div></section>
    <section id="commands" class="tab"><div class="card p-6">ðŸ“œ Commands â€¦</div></section>
    <section id="info" class="tab"><div class="card p-6">ðŸ¤– Bot Infos â€¦</div></section>
    <section id="support" class="tab"><div class="card p-6">ðŸ›Ÿ Support â€¦</div></section>
  </main>

  <footer class="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-gray-500">
    BYT BOT Â© 2025 
  </footer>

  <script>
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);

    /* ===== Tabs ===== */
    function switchTab(id){
      $$('.tab').forEach(n=>n.classList.remove('active'));
      $('#'+id).classList.add('active');
      $$('.tablink').forEach(b=>b.classList.toggle('border-green-700', b.dataset.tab===id));
    }
    $$('.tablink').forEach(btn=>btn.addEventListener('click',()=>switchTab(btn.dataset.tab)));

    /* ===== Image Generator via Backend ===== */
    const promptInput = $('#promptInput');
    const generateButton = $('#generateButton');
    const loadingIndicator = $('#loadingIndicator');
    const imageContainer = $('#imageContainer');

    $('#clearPrompt')?.addEventListener('click',()=>{ promptInput.value=''; });

    generateButton?.addEventListener('click', async ()=>{
      const userPrompt = promptInput.value.trim();
      if(!userPrompt){
        imageContainer.innerHTML = '<p class="text-red-500">[!] Bitte gib eine Bildbeschreibung ein.</p>';
        return;
      }
      generateButton.disabled = true;
      generateButton.textContent = '> Generating...';
      loadingIndicator.classList.remove('hidden');
      imageContainer.innerHTML = '';

      try {
        const r = await fetch("https://byt666-backend.onrender.com/api/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: userPrompt })
        });
        const result = await r.json();

        if(result.predictions?.[0]?.bytesBase64Encoded){
          const base64 = result.predictions[0].bytesBase64Encoded;
          const url = `data:image/png;base64,${base64}`;
          const img = new Image();
          img.src = url;
          img.alt = userPrompt;
          img.className = 'max-w-full h-auto rounded-xl';
          imageContainer.appendChild(img);
        } else {
          imageContainer.innerHTML = '<p class="text-red-500">[!] Fehler beim Generieren.</p>';
          console.warn(result);
        }
      } catch (e) {
        imageContainer.innerHTML = '<p class="text-red-500">[!] Unerwarteter Fehler.</p>';
        console.error(e);
      } finally {
        generateButton.disabled = false;
        generateButton.textContent = '> Bild generieren';
        loadingIndicator.classList.add('hidden');
      }
    });
  </script>
</body>
</html>
